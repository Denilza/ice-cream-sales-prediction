import pandas as pd
from sklearn.linear_model import LinearRegression
import mlflow

# Carregar dados
data = pd.read_csv("inputs/dataset.csv")

X = data[['temperatura']]
y = data['vendas']

# Iniciar experimento no MLflow
mlflow.set_experiment("Ice Cream Sales Prediction")

with mlflow.start_run():
    model = LinearRegression()
    model.fit(X, y)

    # Logar parâmetros e métricas
    mlflow.log_param("model_type", "LinearRegression")
    mlflow.log_metric("coeficiente", model.coef_[0])
    mlflow.log_metric("intercepto", model.intercept_)

    # Salvar modelo no MLflow
    mlflow.sklearn.log_model(model, "modelo_icecream")
